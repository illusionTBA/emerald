(()=>{"use strict";const e=globalThis.Ultraviolet;function t(a,r={},o="/bare/"){if("__uv"in a&&a.__uv instanceof e)return!1;a.document&&a.window&&a.document.querySelectorAll("script[__uv-script]").forEach((e=>e.remove()));const n=!a.window,i="__uv",s="__uv$",l=new e({...r,window:a});"function"==typeof r.construct&&r.construct(l,n?"worker":"window");const{client:c}=l,{HTMLMediaElement:d,HTMLScriptElement:u,HTMLAudioElement:h,HTMLVideoElement:m,HTMLInputElement:v,HTMLEmbedElement:p,HTMLTrackElement:g,HTMLAnchorElement:b,HTMLIFrameElement:f,HTMLAreaElement:y,HTMLLinkElement:_,HTMLBaseElement:w,HTMLFormElement:S,HTMLImageElement:k,HTMLSourceElement:P}=a;c.nativeMethods.defineProperty(a,"__uv",{value:l,enumerable:!1}),l.meta.origin=location.origin,l.location=c.location.emulate((e=>"about:srcdoc"===e?new URL(e):(e.startsWith("blob:")&&(e=e.slice("blob:".length)),new URL(l.sourceUrl(e)))),(e=>l.rewriteUrl(e))),l.bareData=a.__uv$bareData,l.cookieStr=a.__uv$cookies||"",l.meta.url=l.location,l.domain=l.meta.url.host,l.blobUrls=new a.Map,l.referrer="",l.cookies=[],l.localStorageObj={},l.sessionStorageObj={};try{l.bare=new URL(o,a.location.href)}catch(e){l.bare=a.parent.__uv.bare}const U=new e.BareClient(l.bare,l.bareData);if("about:srcdoc"===l.location.href&&(l.meta=a.parent.__uv.meta),a.EventTarget&&(l.addEventListener=a.EventTarget.prototype.addEventListener,l.removeListener=a.EventTarget.prototype.removeListener,l.dispatchEvent=a.EventTarget.prototype.dispatchEvent),c.nativeMethods.defineProperty(c.storage.storeProto,"__uv$storageObj",{get(){return this===c.storage.sessionStorage?l.sessionStorageObj:this===c.storage.localStorage?l.localStorageObj:void 0},enumerable:!1}),a.localStorage){for(const e in a.localStorage)e.startsWith(s+l.location.origin+"@")&&(l.localStorageObj[e.slice((s+l.location.origin+"@").length)]=a.localStorage.getItem(e));l.lsWrap=c.storage.emulate(c.storage.localStorage,l.localStorageObj)}if(a.sessionStorage){for(const e in a.sessionStorage)e.startsWith(s+l.location.origin+"@")&&(l.sessionStorageObj[e.slice((s+l.location.origin+"@").length)]=a.sessionStorage.getItem(e));l.ssWrap=c.storage.emulate(c.storage.sessionStorage,l.sessionStorageObj)}let M=a.document?c.node.baseURI.get.call(a.document):a.location.href,x=l.sourceUrl(M);c.nativeMethods.defineProperty(l.meta,"base",{get:()=>a.document?(c.node.baseURI.get.call(a.document)!==M&&(M=c.node.baseURI.get.call(a.document),x=l.sourceUrl(M)),x):l.meta.url.href}),l.methods={setSource:"__uv$setSource",source:"__uv$source",location:"__uv$location",function:"__uv$function",string:"__uv$string",eval:"__uv$eval",parent:"__uv$parent",top:"__uv$top"},l.filterKeys=[i,l.methods.setSource,l.methods.source,l.methods.location,l.methods.function,l.methods.string,l.methods.eval,l.methods.parent,l.methods.top,"__uv$protocol","__uv$storageObj","__uv$url","__uv$modifiedStyle","__uv$config","__uv$dispatched","Ultraviolet","__uvHook"],c.on("wrap",((e,t)=>{c.nativeMethods.defineProperty(t,"name",c.nativeMethods.getOwnPropertyDescriptor(e,"name")),c.nativeMethods.defineProperty(t,"length",c.nativeMethods.getOwnPropertyDescriptor(e,"length")),c.nativeMethods.defineProperty(t,l.methods.string,{enumerable:!1,value:c.nativeMethods.fnToString.call(e)}),c.nativeMethods.defineProperty(t,l.methods.function,{enumerable:!1,value:e})})),c.fetch.on("request",(e=>{e.data.input=l.rewriteUrl(e.data.input)})),c.fetch.on("requestUrl",(e=>{e.data.value=l.sourceUrl(e.data.value)})),c.fetch.on("responseUrl",(e=>{e.data.value=l.sourceUrl(e.data.value)})),c.xhr.on("open",(e=>{e.data.input=l.rewriteUrl(e.data.input)})),c.xhr.on("responseUrl",(e=>{e.data.value=l.sourceUrl(e.data.value)})),c.workers.on("worker",(e=>{e.data.url=l.rewriteUrl(e.data.url)})),c.workers.on("addModule",(e=>{e.data.url=l.rewriteUrl(e.data.url)})),c.workers.on("importScripts",(e=>{for(const t in e.data.scripts)e.data.scripts[t]=l.rewriteUrl(e.data.scripts[t])})),c.workers.on("postMessage",(e=>{let t=e.data.origin;e.data.origin="*",e.data.message={__data:e.data.message,__origin:l.meta.url.origin,__to:t}})),c.navigator.on("sendBeacon",(e=>{e.data.url=l.rewriteUrl(e.data.url)})),c.document.on("getCookie",(e=>{e.data.value=l.cookieStr})),c.document.on("setCookie",(e=>{Promise.resolve(l.cookie.setCookies(e.data.value,l.db,l.meta)).then((()=>{l.cookie.db().then((e=>{l.cookie.getCookies(e).then((e=>{l.cookieStr=l.cookie.serialize(e,l.meta,!0)}))}))}));const t=l.cookie.setCookie(e.data.value)[0];t.path||(t.path="/"),t.domain||(t.domain=l.meta.url.hostname),l.cookie.validateCookie(t,l.meta,!0)&&(l.cookieStr.length&&(l.cookieStr+="; "),l.cookieStr+=`${t.name}=${t.value}`),e.respondWith(e.data.value)})),c.element.on("setInnerHTML",(e=>{switch(e.that.tagName){case"SCRIPT":e.data.value=l.js.rewrite(e.data.value);break;case"STYLE":e.data.value=l.rewriteCSS(e.data.value);break;default:e.data.value=l.rewriteHtml(e.data.value)}})),c.element.on("getInnerHTML",(e=>{if("SCRIPT"===e.that.tagName)e.data.value=l.js.source(e.data.value);else e.data.value=l.sourceHtml(e.data.value)})),c.element.on("setOuterHTML",(e=>{e.data.value=l.rewriteHtml(e.data.value,{document:"HTML"===e.that.tagName})})),c.element.on("getOuterHTML",(e=>{switch(e.that.tagName){case"HEAD":e.data.value=l.sourceHtml(e.data.value.replace(/<head(.*)>(.*)<\/head>/s,"<op-head$1>$2</op-head>")).replace(/<op-head(.*)>(.*)<\/op-head>/s,"<head$1>$2</head>");break;case"BODY":e.data.value=l.sourceHtml(e.data.value.replace(/<body(.*)>(.*)<\/body>/s,"<op-body$1>$2</op-body>")).replace(/<op-body(.*)>(.*)<\/op-body>/s,"<body$1>$2</body>");break;default:e.data.value=l.sourceHtml(e.data.value,{document:"HTML"===e.that.tagName})}})),c.document.on("write",(e=>{if(!e.data.html.length)return!1;e.data.html=[l.rewriteHtml(e.data.html.join(""))]})),c.document.on("writeln",(e=>{if(!e.data.html.length)return!1;e.data.html=[l.rewriteHtml(e.data.html.join(""))]})),c.element.on("insertAdjacentHTML",(e=>{e.data.html=l.rewriteHtml(e.data.html)})),c.eventSource.on("construct",(e=>{e.data.url=l.rewriteUrl(e.data.url)})),c.eventSource.on("url",(e=>{e.data.url=l.rewriteUrl(e.data.url)})),c.history.on("replaceState",(e=>{e.data.url&&(e.data.url=l.rewriteUrl(e.data.url,"__uv"in e.that?e.that.__uv.meta:l.meta))})),c.history.on("pushState",(e=>{e.data.url&&(e.data.url=l.rewriteUrl(e.data.url,"__uv"in e.that?e.that.__uv.meta:l.meta))})),c.element.on("getAttribute",(e=>{c.element.hasAttribute.call(e.that,l.attributePrefix+"-attr-"+e.data.name)&&e.respondWith(e.target.call(e.that,l.attributePrefix+"-attr-"+e.data.name))})),c.message.on("postMessage",(e=>{let t=e.data.origin,a=l.call;e.that&&(a=e.that.__uv$source.call),e.data.origin="*",e.data.message={__data:e.data.message,__origin:(e.that||e.target).__uv$source.location.origin,__to:t},e.respondWith(a(e.target,n?[e.data.message,e.data.transfer]:[e.data.message,e.data.origin,e.data.transfer],e.that))})),c.message.on("data",(e=>{const{value:t}=e.data;"object"==typeof t&&"__data"in t&&"__origin"in t&&e.respondWith(t.__data)})),c.message.on("origin",(e=>{const t=c.message.messageData.get.call(e.that);"object"==typeof t&&t.__data&&t.__origin&&e.respondWith(t.__origin)})),c.overrideDescriptor(a,"origin",{get:(e,t)=>l.location.origin}),c.node.on("baseURI",(e=>{e.data.value.startsWith(a.location.origin)&&(e.data.value=l.sourceUrl(e.data.value))})),c.element.on("setAttribute",(e=>{if(e.that instanceof d&&"src"===e.data.name&&e.data.value.startsWith("blob:"))return e.target.call(e.that,l.attributePrefix+"-attr-"+e.data.name,e.data.value),void(e.data.value=l.blobUrls.get(e.data.value));l.attrs.isUrl(e.data.name)&&(e.target.call(e.that,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.rewriteUrl(e.data.value)),l.attrs.isStyle(e.data.name)&&(e.target.call(e.that,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.rewriteCSS(e.data.value,{context:"declarationList"})),l.attrs.isHtml(e.data.name)&&(e.target.call(e.that,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.rewriteHtml(e.data.value,{...l.meta,document:!0,injectHead:l.createHtmlInject(l.handlerScript,l.bundleScript,l.configScript,l.bareData,l.cookieStr,a.location.href)})),l.attrs.isSrcset(e.data.name)&&(e.target.call(e.that,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.html.wrapSrcset(e.data.value)),l.attrs.isForbidden(e.data.name)&&(e.data.name=l.attributePrefix+"-attr-"+e.data.name)})),c.element.on("audio",(e=>{e.data.url=l.rewriteUrl(e.data.url)})),c.element.hookProperty([b,y,_,w],"href",{get:(e,t)=>l.sourceUrl(e.call(t)),set:(e,t,[a])=>{c.element.setAttribute.call(t,l.attributePrefix+"-attr-href",a),e.call(t,l.rewriteUrl(a))}}),c.element.hookProperty([u,h,m,d,k,v,p,f,g,P],"src",{get:(e,t)=>l.sourceUrl(e.call(t)),set:(e,t,[a])=>{if(new String(a).toString().trim().startsWith("blob:")&&t instanceof d)return c.element.setAttribute.call(t,l.attributePrefix+"-attr-src",a),e.call(t,l.blobUrls.get(a)||a);c.element.setAttribute.call(t,l.attributePrefix+"-attr-src",a),e.call(t,l.rewriteUrl(a))}}),c.element.hookProperty([S],"action",{get:(e,t)=>l.sourceUrl(e.call(t)),set:(e,t,[a])=>{c.element.setAttribute.call(t,l.attributePrefix+"-attr-action",a),e.call(t,l.rewriteUrl(a))}}),c.element.hookProperty([k],"srcset",{get:(e,t)=>c.element.getAttribute.call(t,l.attributePrefix+"-attr-srcset")||e.call(t),set:(e,t,[a])=>{c.element.setAttribute.call(t,l.attributePrefix+"-attr-srcset",a),e.call(t,l.html.wrapSrcset(a))}}),c.element.hookProperty(u,"integrity",{get:(e,t)=>c.element.getAttribute.call(t,l.attributePrefix+"-attr-integrity"),set:(e,t,[a])=>{c.element.setAttribute.call(t,l.attributePrefix+"-attr-integrity",a)}}),c.element.hookProperty(f,"sandbox",{get:(e,t)=>c.element.getAttribute.call(t,l.attributePrefix+"-attr-sandbox")||e.call(t),set:(e,t,[a])=>{c.element.setAttribute.call(t,l.attributePrefix+"-attr-sandbox",a)}});const E=Object.getOwnPropertyDescriptor(f.prototype,"contentWindow").get;function $(e){const a=E.call(e);try{a.__uv$bareData=l.bareData,a.__uv$cookies=l.cookieStr,a.__uv||t(a,r,o)}catch(e){console.error("catastrophic failure"),console.error(e)}}function j(e,t){const a=`on${t}`,r=new WeakMap;Reflect.defineProperty(e,a,{enumerable:!0,configurable:!0,get(){return r.has(this)?r.get(this):null},set(e){return"function"==typeof e&&(r.has(this)&&this.removeEventListener(t,r.get(this)),r.set(this,e),this.addEventListener(t,e)),e}})}c.element.hookProperty(f,"contentWindow",{get:(e,t)=>($(t),e.call(t))}),c.element.hookProperty(f,"contentDocument",{get:(e,t)=>($(t),e.call(t))}),c.element.hookProperty(f,"srcdoc",{get:(e,t)=>c.element.getAttribute.call(t,l.attributePrefix+"-attr-srcdoc")||e.call(t),set:(e,t,[r])=>{e.call(t,l.rewriteHtml(r,{document:!0,injectHead:l.createHtmlInject(l.handlerScript,l.bundleScript,l.configScript,l.bareData,l.cookieStr,a.location.href)}))}}),c.node.on("getTextContent",(e=>{"SCRIPT"===e.that.tagName&&(e.data.value=l.js.source(e.data.value))})),c.node.on("setTextContent",(e=>{"SCRIPT"===e.that.tagName&&(e.data.value=l.js.rewrite(e.data.value))})),"serviceWorker"in a.navigator&&delete a.Navigator.prototype.serviceWorker,c.document.on("getDomain",(e=>{e.data.value=l.domain})),c.document.on("setDomain",(e=>{if(!e.data.value.toString().endsWith(l.meta.url.hostname.split(".").slice(-2).join(".")))return e.respondWith("");e.respondWith(l.domain=e.data.value)})),c.document.on("url",(e=>{e.data.value=l.location.href})),c.document.on("documentURI",(e=>{e.data.value=l.location.href})),c.document.on("referrer",(e=>{e.data.value=l.referrer||l.sourceUrl(e.data.value)})),c.document.on("parseFromString",(e=>{if("text/html"!==e.data.type)return!1;e.data.string=l.rewriteHtml(e.data.string,{...l.meta,document:!0})})),c.attribute.on("getValue",(e=>{c.element.hasAttribute.call(e.that.ownerElement,l.attributePrefix+"-attr-"+e.data.name)&&(e.data.value=c.element.getAttribute.call(e.that.ownerElement,l.attributePrefix+"-attr-"+e.data.name))})),c.attribute.on("setValue",(e=>{l.attrs.isUrl(e.data.name)&&(c.element.setAttribute.call(e.that.ownerElement,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.rewriteUrl(e.data.value)),l.attrs.isStyle(e.data.name)&&(c.element.setAttribute.call(e.that.ownerElement,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.rewriteCSS(e.data.value,{context:"declarationList"})),l.attrs.isHtml(e.data.name)&&(c.element.setAttribute.call(e.that.ownerElement,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.rewriteHtml(e.data.value,{...l.meta,document:!0,injectHead:l.createHtmlInject(l.handlerScript,l.bundleScript,l.configScript,l.bareData,l.cookieStr,a.location.href)})),l.attrs.isSrcset(e.data.name)&&(c.element.setAttribute.call(e.that.ownerElement,l.attributePrefix+"-attr-"+e.data.name,e.data.value),e.data.value=l.html.wrapSrcset(e.data.value))})),c.url.on("createObjectURL",(e=>{let t=e.target.call(e.that,e.data.object);if(t.startsWith("blob:"+location.origin)){let r="blob:"+("about:blank"!==l.meta.url.href?l.meta.url.origin:a.parent.__uv.meta.url.origin)+t.slice("blob:".length+location.origin.length);l.blobUrls.set(r,t),e.respondWith(r)}else e.respondWith(t)})),c.url.on("revokeObjectURL",(e=>{if(l.blobUrls.has(e.data.url)){const t=e.data.url;e.data.url=l.blobUrls.get(e.data.url),l.blobUrls.delete(t)}})),c.storage.on("get",(e=>{e.data.name=s+l.meta.url.origin+"@"+e.data.name})),c.storage.on("set",(e=>{e.that.__uv$storageObj&&(e.that.__uv$storageObj[e.data.name]=e.data.value),e.data.name=s+l.meta.url.origin+"@"+e.data.name})),c.storage.on("delete",(e=>{e.that.__uv$storageObj&&delete e.that.__uv$storageObj[e.data.name],e.data.name=s+l.meta.url.origin+"@"+e.data.name})),c.storage.on("getItem",(e=>{e.data.name=s+l.meta.url.origin+"@"+e.data.name})),c.storage.on("setItem",(e=>{e.that.__uv$storageObj&&(e.that.__uv$storageObj[e.data.name]=e.data.value),e.data.name=s+l.meta.url.origin+"@"+e.data.name})),c.storage.on("removeItem",(e=>{e.that.__uv$storageObj&&delete e.that.__uv$storageObj[e.data.name],e.data.name=s+l.meta.url.origin+"@"+e.data.name})),c.storage.on("clear",(e=>{if(e.that.__uv$storageObj)for(const t of c.nativeMethods.keys.call(null,e.that.__uv$storageObj))delete e.that.__uv$storageObj[t],c.storage.removeItem.call(e.that,s+l.meta.url.origin+"@"+t),e.respondWith()})),c.storage.on("length",(e=>{e.that.__uv$storageObj&&e.respondWith(c.nativeMethods.keys.call(null,e.that.__uv$storageObj).length)})),c.storage.on("key",(e=>{e.that.__uv$storageObj&&e.respondWith(c.nativeMethods.keys.call(null,e.that.__uv$storageObj)[e.data.index]||null)}));const O=["ws:","wss:"];class T extends EventTarget{#e;#t;#a="blob";#r="";#o="";#n="";async#i(e,t){const a={};Reflect.setPrototypeOf(a,null),a.Origin=l.meta.url.origin,a["User-Agent"]=navigator.userAgent,""!==l.cookieStr&&(a.Cookie=l.cookieStr.toString()),this.#e=await U.createWebSocket(e,a,t),this.#e.binaryType=this.#a,this.#e.addEventListener("message",(e=>{this.dispatchEvent(new MessageEvent("message",e))})),this.#e.addEventListener("open",(async e=>{this.dispatchEvent(new Event("open",e))})),this.#e.addEventListener("error",(e=>{this.dispatchEvent(new ErrorEvent("error",e))})),this.#e.addEventListener("close",(e=>{this.dispatchEvent(new Event("close",e))}));const r=await this.#e.meta;r.headers.has("sec-websocket-protocol")&&(this.#r=r.headers.get("sec-websocket-protocol")),r.headers.has("sec-websocket-extensions")&&(this.#o=r.headers.get("sec-websocket-extensions"));let o=r.rawHeaders["set-cookie"]||[];Array.isArray(o)||(o=[]);for(const e of o)document.cookie=e}get url(){return this.#n}constructor(...e){if(super(),!e.length)throw new DOMException("Failed to construct 'WebSocket': 1 argument required, but only 0 present.");const[t,a]=e;let r;try{r=new URL(t)}catch(e){throw new DOMException(`Faiiled to construct 'WebSocket': The URL '${t}' is invalid.`)}if(!O.includes(r.protocol))throw new DOMException(`Failed to construct 'WebSocket': The URL's scheme must be either 'ws' or 'wss'. '${r.protocol}' is not allowed.`);this.#t=this.#i(r,a)}get protocol(){return this.#r}get extensions(){return this.#o}get readyState(){return this.#e?this.#e.readyState:T.CONNECTING}get binaryType(){return this.#a}set binaryType(e){return this.#a=e,this.#e&&(this.#e.binaryType=e),e}send(e){if(!this.#e)throw new DOMException("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state.");this.#e.send(e)}close(e,t){if(void 0!==e&&("number"!=typeof e&&(e=0),1e3!==e&&(e<3e3||e>4999)))throw new DOMException(`Failed to execute 'close' on 'WebSocket': The code must be either 1000, or between 3000 and 4999. ${e} is neither.`);this.#t.then((()=>this.#e.close(e,t)))}}j(T.prototype,"close"),j(T.prototype,"open"),j(T.prototype,"message"),j(T.prototype,"error");for(const e of["url","protocol","extensions","readyState","binaryType"]){const t=Object.getOwnPropertyDescriptor(a.WebSocket.prototype,e),r=Object.getOwnPropertyDescriptor(T.prototype,e);r?.get&&t?.get&&c.emit("wrap",r.get,t.get),r?.set&&t?.set&&c.emit("wrap",r.get,t.get)}if(c.emit("wrap",a.WebSocket.prototype.send,T.prototype.send),c.emit("wrap",a.WebSocket.prototype.close,T.prototype.close),c.override(a,"WebSocket",((e,t,a)=>new T(...a)),!0),T.prototype.constructor=a.WebSocket,c.function.on("function",(e=>{e.data.script=l.rewriteJS(e.data.script)})),c.function.on("toString",(e=>{l.methods.string in e.that&&e.respondWith(e.that[l.methods.string])})),c.object.on("getOwnPropertyNames",(e=>{e.data.names=e.data.names.filter((e=>!l.filterKeys.includes(e)))})),c.object.on("getOwnPropertyDescriptors",(e=>{for(const t of l.filterKeys)delete e.data.descriptors[t]})),c.style.on("setProperty",(e=>{c.style.dashedUrlProps.includes(e.data.property)&&(e.data.value=l.rewriteCSS(e.data.value,{context:"value",...l.meta}))})),c.style.on("getPropertyValue",(e=>{c.style.dashedUrlProps.includes(e.data.property)&&e.respondWith(l.sourceCSS(e.target.call(e.that,e.data.property),{context:"value",...l.meta}))})),"CSS2Properties"in a)for(const e of c.style.urlProps)c.overrideDescriptor(a.CSS2Properties.prototype,e,{get:(e,t)=>l.sourceCSS(e.call(t),{context:"value",...l.meta}),set:(e,t,a)=>{e.call(t,l.rewriteCSS(a,{context:"value",...l.meta}))}});else"HTMLElement"in a&&c.overrideDescriptor(a.HTMLElement.prototype,"style",{get:(e,t)=>{const a=e.call(t);if(!a.__uv$modifiedStyle)for(const e of c.style.urlProps)c.nativeMethods.defineProperty(a,e,{enumerable:!0,configurable:!0,get(){const t=c.style.getPropertyValue.call(this,e)||"";return l.sourceCSS(t,{context:"value",...l.meta})},set(t){c.style.setProperty.call(this,c.style.propToDashed[e]||e,l.rewriteCSS(t,{context:"value",...l.meta}))}}),c.nativeMethods.defineProperty(a,"__uv$modifiedStyle",{enumerable:!1,value:!0});return a}});c.style.on("setCssText",(e=>{e.data.value=l.rewriteCSS(e.data.value,{context:"declarationList",...l.meta})})),c.style.on("getCssText",(e=>{e.data.value=l.sourceCSS(e.data.value,{context:"declarationList",...l.meta})})),a.window&&l.addEventListener.call(a,"hashchange",(e=>{if(e.__uv$dispatched)return!1;e.stopImmediatePropagation();const t=a.location.hash;c.history.replaceState.call(a.history,"","",e.oldURL),l.location.hash=t})),c.location.on("hashchange",((e,t,r)=>{if(r.HashChangeEvent&&c.history.replaceState){c.history.replaceState.call(a.history,"","",l.rewriteUrl(t));const o=new r.HashChangeEvent("hashchange",{newURL:t,oldURL:e});c.nativeMethods.defineProperty(o,"__uv$dispatched",{value:!0,enumerable:!1}),l.dispatchEvent.call(a,o)}})),c.fetch.overrideRequest(),c.fetch.overrideUrl(),c.xhr.overrideOpen(),c.xhr.overrideResponseUrl(),c.element.overrideHtml(),c.element.overrideAttribute(),c.element.overrideInsertAdjacentHTML(),c.element.overrideAudio(),c.node.overrideBaseURI(),c.node.overrideTextContent(),c.attribute.overrideNameValue(),c.document.overrideDomain(),c.document.overrideURL(),c.document.overrideDocumentURI(),c.document.overrideWrite(),c.document.overrideReferrer(),c.document.overrideParseFromString(),c.storage.overrideMethods(),c.storage.overrideLength(),c.object.overrideGetPropertyNames(),c.object.overrideGetOwnPropertyDescriptors(),c.history.overridePushState(),c.history.overrideReplaceState(),c.eventSource.overrideConstruct(),c.eventSource.overrideUrl(),c.url.overrideObjectURL(),c.document.overrideCookie(),c.message.overridePostMessage(),c.message.overrideMessageOrigin(),c.message.overrideMessageData(),c.workers.overrideWorker(),c.workers.overrideAddModule(),c.workers.overrideImportScripts(),c.workers.overridePostMessage(),c.style.overrideSetGetProperty(),c.style.overrideCssText(),c.navigator.overrideSendBeacon(),c.function.overrideFunction(),c.function.overrideToString(),c.location.overrideWorkerLocation((e=>new URL(l.sourceUrl(e)))),c.overrideDescriptor(a,"localStorage",{get:(e,t)=>(t||a).__uv.lsWrap}),c.overrideDescriptor(a,"sessionStorage",{get:(e,t)=>(t||a).__uv.ssWrap}),c.override(a,"open",((e,t,a)=>{if(!a.length)return e.apply(t,a);let[r]=a;return r=l.rewriteUrl(r),e.call(t,r)})),l.$wrap=function(e){return"location"===e?l.methods.location:"eval"===e?l.methods.eval:e},l.$get=function(e){return e===a.location?l.location:e===a.eval?l.eval:e===a.parent?a.__uv$parent:e===a.top?a.__uv$top:e},l.eval=c.wrap(a,"eval",((e,t,a)=>{if(!a.length||"string"!=typeof a[0])return e.apply(t,a);let[r]=a;return r=l.rewriteJS(r),e.call(t,r)})),l.call=function(e,t,a){return a?e.apply(a,t):e(...t)},l.call$=function(e,t,a=[]){return e[t].apply(e,a)},c.nativeMethods.defineProperty(a.Object.prototype,i,{get:()=>l,enumerable:!1}),c.nativeMethods.defineProperty(a.Object.prototype,l.methods.setSource,{value:function(e){return c.nativeMethods.isExtensible(this)?(c.nativeMethods.defineProperty(this,l.methods.source,{value:e,writable:!0,enumerable:!1}),this):this},enumerable:!1}),c.nativeMethods.defineProperty(a.Object.prototype,l.methods.source,{value:l,writable:!0,enumerable:!1}),c.nativeMethods.defineProperty(a.Object.prototype,l.methods.location,{configurable:!0,get(){return this===a.document||this===a?l.location:this.location},set(e){this===a.document||this===a?l.location.href=e:this.location=e}}),c.nativeMethods.defineProperty(a.Object.prototype,l.methods.parent,{configurable:!0,get(){const e=this.parent;if(this===a)try{return"__uv"in e?e:this}catch(e){return this}return e},set(e){this.parent=e}}),c.nativeMethods.defineProperty(a.Object.prototype,l.methods.top,{configurable:!0,get(){const e=this.top;if(this===a){if(e===this.parent)return this[l.methods.parent];try{if("__uv"in e)return e;{let t=this;for(;t.parent!==e;)t=t.parent;return"__uv"in t?t:this}}catch(e){return this}}return e},set(e){this.top=e}}),c.nativeMethods.defineProperty(a.Object.prototype,l.methods.eval,{configurable:!0,get(){return this===a?l.eval:this.eval},set(e){this.eval=e}})}self.__uv||t(self,self.__uv$config,self.__uv$config.bare),self.__uvHook=t})();
//# sourceMappingURL=uv.handler.js.map